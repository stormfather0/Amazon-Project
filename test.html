<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <link rel="stylesheet" href="styles/pages/amazon.css"> -->
     <link rel="stylesheet" href="styles/pages/account-new.css">
</head>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
    }

    /* Welcome message */
    .welcome {
    margin: 77px 40px 20px 40px;
}

    /* Main container for layout */
    .main {
        display: flex;
        width: 100%;
        height: calc(100vh - 100px); /* Adjust height */
    }
/* Default sidebar styles */
.account-menu {
    width: 220px;
    flex-grow: 0; /* Prevents shrinking */
    flex-shrink: 0; /* Ensures it stays fixed */
}

.account-menu ul {
    list-style: none;
    padding: 0;
}

.account-menu li {
    padding: 15px;
    cursor: pointer;
    transition: background 0.3s;
}

.account-menu li:hover {
    background: #e9ecef;
}

/* Move the account menu to the top when the screen is below 640px */
@media (max-width: 640px) {
    .main {
        flex-direction: column; /* Stack elements vertically */
    }

    .account-menu {
        width: 100%; /* Full width */
        display: flex;
        justify-content: center;
        background: #f8f9fa; /* Light background */
        padding: 10px 0;
    }

    .account-menu ul {
        display: flex;
        gap: 15px;
        justify-content: center;
    }

    .account-menu li {
        padding: 10px 15px;
        border-radius: 5px;
        text-align: center;
    }
}
</style>

<body>
    <div id="header-container"></div>
    
    <h1 class="welcome">Welcome, <span id="user-name">Loading...</span></h1>



    <div class="main">
        <!-- Sidebar (40%) -->
        <div class="account-menu">
            <ul>
                <li>Personal Info</li>
                <li>Orders</li>
                <li>Favorites</li>
            </ul>
        </div>

        <!-- Favorites Section (60%) -->
        <p id="greeting-message" style="display: none; padding: 20px;">Hello! Here is your personal info.</p>
        <p id="greeting-message" style="display: none;">Hello! Welcome to your Personal Info.</p>
<p id="orders-message" style="display: none;">Here you can check your Orders.</p>
        <div class="account-products-grid" id="favourite-products-container"></div>
    </div>


    <!-- <h1 class="welcome">Welcome, <span id="user-name">Loading...</span></h1> -->

    <!-- <p>ID: <span id="userId"></span></p>
    <p>YOUR favourites: <span id="userFavorites"></span></p> -->

    <script>
document.addEventListener('DOMContentLoaded', async () => {
    const authToken = localStorage.getItem('authToken');
    if (!authToken) {
        window.location.href = 'login.html';
        return;
    }

    // Fetch user details
    try {
        const response = await fetch('https://amazon-project-sta4.onrender.com/api/user', {
            method: 'GET',
            headers: { 'Authorization': authToken }
        });

        if (!response.ok) throw new Error('Failed to fetch user data');

        const data = await response.json();
        document.getElementById('user-name').textContent = `${data.firstName} ${data.lastName}`;
    } catch (error) {
        console.error('Error fetching user data:', error);
        document.getElementById('user-name').textContent = 'Guest';
    }

    // Fetch header
    fetch('header.html')
        .then(response => response.text())
        .then(data => {
            document.getElementById('header-container').innerHTML = data;
        });

    // Get menu items
    const menuItems = document.querySelectorAll('.account-menu li');
    const favouritesContainer = document.getElementById('favourite-products-container');
    const greetingMessage = document.getElementById('greeting-message');
    const ordersMessage = document.getElementById('orders-message');

    menuItems.forEach((item, index) => {
        item.addEventListener('click', () => {
            // Hide all sections first
            greetingMessage.style.display = 'none';
            ordersMessage.style.display = 'none';
            favouritesContainer.style.display = 'none';

            // Show the clicked section
            if (index === 0) {  
                greetingMessage.style.display = 'block';  
            } else if (index === 1) { 
                ordersMessage.style.display = 'block';  
            } else if (index === 2) { 
                favouritesContainer.style.display = 'grid';  
            }
        });
    });
});
    </script>
    <script src="test.js" type="module"></script>
</body>
</html>